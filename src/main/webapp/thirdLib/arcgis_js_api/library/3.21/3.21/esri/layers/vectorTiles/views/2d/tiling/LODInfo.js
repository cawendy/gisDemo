// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.21/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/2d/tiling/LODInfo",["require","exports","./TileKey","../../../geometry/support/spatialReferenceUtils"],function(r,t,e,p){function m(b,a,d){b[0]=a;b[1]=d;return b}return function(){function b(a,d,c,b,f,g,h,k,q,n,e,m){this.level=a;this.resolution=d;this.scale=c;this.origin=b;this.first=f;this.last=g;this.size=h;this.norm=k;this.worldStart=q;this.worldEnd=n;this.worldSize=e;this.wrap=m}b.create=function(a,d,c){var l=p.getInfo(a.spatialReference),f=[a.origin.x,a.origin.y],
g=[a.size[0]*d.resolution,a.size[1]*d.resolution],h=[-Infinity,-Infinity],k=[Infinity,Infinity],e=[Infinity,Infinity];c&&(m(h,Math.max(0,Math.floor((c.xmin-f[0])/g[0])),Math.max(0,Math.floor((f[1]-c.ymax)/g[1]))),m(k,Math.max(0,Math.floor((c.xmax-f[0])/g[0])),Math.max(0,Math.floor((f[1]-c.ymin)/g[1]))),m(e,k[0]-h[0]+1,k[1]-h[1]+1));var n;l?(a=[Math.ceil(Math.round(2*l.origin[1]/d.resolution)/a.size[0]),e[1]],l=[Math.floor((l.origin[0]-f[0])/g[0]),h[1]],c=[a[0]-l[0]-1,k[1]],n=!0):(l=h,c=k,a=e,n=!1);
return new b(d.level,d.resolution,d.scale,f,h,k,e,g,l,c,a,n)};b.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};b.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};b.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};b.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};b.prototype.getLastColumnForWorld=function(a){return a*
this.worldSize[0]+this.first[0]+this.size[0]-1};b.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};b.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};b.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};b.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};b.prototype.getTileBounds=function(a,b){var c=e.pool.acquire(b),d=this.getXForColumn(this.denormalizeCol(c.col,c.world)),f=this.getYForRow(c.row+1),g=this.getXForColumn(this.denormalizeCol(c.col,
c.world)+1),h=this.getYForRow(c.row);a[0]=d;a[1]=f;a[2]=g;a[3]=h;e.pool.release(c);return a};b.prototype.getTileCoords=function(a,b){var c=e.pool.acquire(b);m(a,this.getXForColumn(this.denormalizeCol(c.col,c.world)),this.getYForRow(c.row));e.pool.release(c);return a};return b}()});